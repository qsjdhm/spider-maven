<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC
        "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 这块等于dao接口的实现  namespace必须和接口的类路径一样 -->
<mapper namespace="com.spider.dao.HousesMapper">

    <!-- 根据名称获取楼盘 -->
    <select id="findByName" parameterType="String" resultType="com.spider.entity.Houses">
        select name, hash
        from houses.houses where name=#{name}
    </select>

    <!-- 插入楼盘 -->
    <insert id="insertHouses" parameterType="com.spider.entity.Houses" useGeneratedKeys="true" keyProperty="id">
        INSERT INTO `houses`.`houses` ( `name`, `fdcName`, `sfwUrl`
        , `cover`, `address`, `averagePrice`, `openingDate`, `pRebName, `hash`)
        VALUES (#{name}, #{fdcName}, #{sfwUrl}, #{cover}, #{address}
        , #{averagePrice}, #{openingDate}, #{pRebName}, #{hash})
    </insert>

    <!-- 更新楼盘 -->
    <update id="updateHouses" parameterType="com.spider.entity.Houses">
        UPDATE houses.houses
        SET fdcName=#{fdcName}, sfwUrl=#{sfwUrl}, cover=#{cover},
         address=#{address}, averagePrice=#{averagePrice}, openingDate=#{openingDate},
         pRebName=#{pRebName}, hash=#{hash}
        WHERE name=#{name}
    </update>

</mapper>
